<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Antoine GagnÃ©">
  <title>Notes de cours</title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link href="data:text/css,%2Emobile%2Dhidden%20%7B%0A%20%20%20%20display%3A%20none%3B%0A%7D%0A%0A%2Efixed%2Dnavbar%20%7B%0A%20%20%20%20background%2Dcolor%3A%20white%3B%0A%20%20%20%20z%2Dindex%3A%20100%3B%0A%20%20%20%20top%3A%200%3B%0A%7D%0A%0A%2Enavbar%20%7B%0A%20%20%20%20padding%2Dleft%3A%201em%3B%0A%20%20%20%20left%3A%200%3B%0A%20%20%20%20width%3A%20100%25%3B%0A%20%20%20%20background%2Dcolor%3A%20white%3B%0A%20%20%20%20position%3A%20fixed%3B%0A%20%20%20%20z%2Dindex%3A%20100%3B%0A%20%20%20%20top%3A%200%3B%0A%7D%0A%0A%23toggle%2Dnav%20%7B%0A%20%20%20%20cursor%3A%20pointer%3B%0A%20%20%20%20margin%2Dtop%3A%205px%3B%0A%20%20%20%20width%3A%2030px%3B%0A%20%20%20%20height%3A%2030px%3B%0A%20%20%20%20background%2Dcolor%3A%20%23fff%3B%0A%20%20%20%20border%3A%201px%20solid%20%23666%3B%0A%20%20%20%20border%2Dradius%3A%203px%3B%0A%20%20%20%20padding%3A%203px%203px%200%203px%3B%0A%7D%0A%0A%2Esr%2Donly%20%7B%0A%20%20%20%20position%3A%20absolute%3B%0A%20%20%20%20width%3A%201px%3B%0A%20%20%20%20height%3A%201px%3B%0A%20%20%20%20margin%3A%20%2D1px%3B%0A%20%20%20%20padding%3A%200%3B%0A%20%20%20%20overflow%3A%20hidden%3B%0A%20%20%20%20clip%3A%20rect%280%2C%200%2C%200%2C%200%29%3B%0A%20%20%20%20border%3A%200%3B%0A%7D%0A%0A%2Ebar%20%7B%0A%20%20%20%20display%3A%20block%3B%0A%20%20%20%20background%2Dcolor%3A%20%23000%3B%0A%20%20%20%20border%2Dradius%3A%202px%3B%0A%20%20%20%20width%3A%20100%25%3B%0A%20%20%20%20height%3A%202px%3B%0A%20%20%20%20margin%3A%202px%200%203px%3B%0A%20%20%20%20padding%3A%200%3B%0A%7D%0A%0Abody%20%7B%0A%20%20%20%20color%3A%20%23333%3B%0A%20%20%20%20font%3A%2016px%2F1%2E6%20%27Source%20Serif%20Pro%27%2C%20Georgia%2C%20Times%2C%20%27Times%20New%20Roman%27%2C%20serif%3B%20%20%20%20%0A%20%20%20%20text%2Dalign%3A%20justify%3B%0A%20%20%20%20font%2Dsize%3A%2018px%3B%0A%20%20%20%20width%3A%2090%25%3B%0A%20%20%20%20max%2Dwidth%3A%20600px%3B%0A%20%20%20%20margin%2Dright%3A%20auto%3B%0A%20%20%20%20margin%2Dleft%3A%20auto%3B%0A%20%20%20%20padding%3A%200%3B%0A%7D%0A%0Ah1%2C%20h2%2C%20h3%2C%20h4%2C%20h5%2C%20h6%20%7B%0A%20%20%20%20text%2Dalign%3A%20left%3B%0A%20%20%20%20padding%2Dbottom%3A%200%2E01em%3B%0A%20%20%20%20border%2Dbottom%3A%202px%20solid%20%23DDDDDD%3B%0A%7D%0A%0Ah1%20%7B%0A%20%20%20%20font%2Dsize%3A%202em%3B%0A%7D%0A%0Ah2%20%7B%0A%20%20%20%20font%2Dsize%3A%201%2E7em%3B%0A%7D%0A%0Ah3%20%7B%0A%20%20%20%20font%2Dsize%3A%201%2E5em%3B%0A%7D%0A%0Ah4%20%7B%0A%20%20%20%20font%2Dsize%3A%201%2E3em%3B%20%20%20%20%0A%7D%0A%0Ah5%20%7B%0A%20%20%20%20font%2Dsize%3A%201%2E1em%3B%0A%7D%0A%0Ah6%20%7B%0A%20%20%20%20font%2Dsize%3A%201%2E05em%3B%0A%7D%0A%0Ali%20%7B%0A%20%20%20%20padding%3A%200%2E2em%3B%0A%7D%0A%0Aa%20%7B%0A%20%20%20%20text%2Ddecoration%3A%20none%3B%0A%20%20%20%20color%3A%20%234078c0%3B%0A%20%20%20%20background%2Dcolor%3A%20transparent%3B%0A%7D%0A%0A%2Etitle%20%7B%0A%20%20%20%20margin%2Dtop%3A%201em%3B%0A%20%20%20%20margin%2Dbottom%3A%200%2E4em%3B%0A%7D%0A%0A%2Eauthor%20%7B%0A%20%20%20%20display%3A%20inline%3B%0A%20%20%20%20font%2Dsize%3A%200%2E8em%3B%0A%20%20%20%20padding%3A%200%3B%0A%20%20%20%20border%3A%20none%3B%0A%20%20%20%20margin%3A%200%3B%0A%7D%0A%0A%2Edate%20%7B%0A%20%20%20%20float%3A%20right%3B%0A%20%20%20%20display%3A%20inline%3B%0A%20%20%20%20font%2Dsize%3A%200%2E8em%3B%0A%20%20%20%20padding%3A%200%3B%0A%20%20%20%20margin%3A%200%3B%0A%20%20%20%20border%3A%20none%3B%0A%7D%0A%0Aa%20%7B%0A%20%20%20%20color%3A%20%23333%3B%0A%7D%0A%0A%23TOC%20%7B%0A%20%20%20%20position%3A%20fixed%3B%0A%20%20%20%20top%3A%2038px%3B%0A%20%20%20%20left%3A%200%3B%0A%20%20%20%20bottom%3A%200%3B%0A%20%20%20%20overflow%2Dy%3A%20scroll%3B%0A%20%20%20%20text%2Dalign%3A%20left%3B%0A%20%20%20%20background%2Dcolor%3A%20%23fafafa%3B%0A%7D%0A%0A%23TOC%20a%20%7B%0A%20%20%20%20background%3A%20transparent%3B%0A%7D%0A%0A%23TOC%20ul%20%7B%0A%20%20%20%20padding%3A%200%3B%0A%20%20%20%20padding%2Dleft%3A%201em%3B%0A%7D%0A%0A%23TOC%20li%20%7B%0A%20%20%20%20list%2Dstyle%2Dtype%3A%20none%3B%0A%7D%0A%0A%23TOC%20a%3Ahover%20%7B%0A%20%20%20%20color%3A%20%234390FF%0A%7D%0A%0A%23mat%C3%A9riel%20img%20%7B%0A%20%20%20%20padding%3A%200%3B%0A%20%20%20%20margin%2Dright%3A%20auto%3B%0A%20%20%20%20margin%2Dleft%3A%20auto%3B%0A%20%20%20%20width%3A%2090%25%3B%0A%20%20%20%20max%2Dwidth%3A%20600px%3B%0A%20%20%20%20margin%2Dtop%3A%202em%3B%0A%7D%0A%0Afigure%20%7B%0A%20%20%20%20width%3A%20100%25%3B%0A%20%20%20%20max%2Dwidth%3A%20600px%3B%0A%20%20%20%20margin%2Dright%3A%20auto%3B%0A%20%20%20%20margin%2Dleft%3A%20auto%3B%0A%7D%0A%0Aimg%20%7B%0A%20%20%20%20width%3A%20100%25%3B%0A%20%20%20%20max%2Dwidth%3A%20600px%3B%0A%20%20%20%20margin%2Dright%3A%20auto%3B%0A%20%20%20%20margin%2Dleft%3A%20auto%3B%0A%7D%0A%0Afigcaption%20%7B%0A%20%20%20%20text%2Dalign%3A%20center%3B%0A%7D%0A%0A%2EsourceCode%20%7B%0A%20%20%20%20overflow%2Dx%3A%20auto%3B%0A%20%20%20%20border%2Dradius%3A%208px%3B%0A%20%20%20%20background%2Dcolor%3A%20%23F7F7F7%3B%0A%7D%0A%0Atable%20caption%20%7B%0A%20%20%20%20margin%2Dbottom%3A%201em%3B%0A%20%20%20%20text%2Dalign%3A%20center%3B%0A%7D%0A%0Apre%20%7B%0A%20%20%20%20overflow%2Dx%3A%20scroll%3B%0A%7D%0A%0A%40media%20screen%20and%20%28max%2Dwidth%3A%201300px%29%20%7B%0A%20%20%20%20table%20%7B%0A%20%20%20%20%20%20%20%20width%3A%20100%25%3B%0A%20%20%20%20%20%20%20%20display%3A%20block%3B%0A%20%20%20%20%20%20%20%20overflow%2Dx%3A%20auto%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%23TOC%20%7B%0A%20%20%20%20%20%20%20%20z%2Dindex%3A%201000%3B%0A%20%20%20%20%20%20%20%20%2F%2A%0A%20%20%20%20%20%20%20%20%2Dwebkit%2Danimation%3A%200%2E5s%20linear%200s%20slideIn%3B%0A%20%20%20%20%20%20%20%20%20%20%20%2Dmoz%2Danimation%3A%200%2E5s%20linear%200s%20slideIn%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%2Do%2Danimation%3A%200%2E5s%20linear%200s%20slideIn%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20animation%3A%200%2E5s%20linear%200s%20slideIn%3B%0A%20%20%20%20%20%20%20%20%2A%2F%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2A%0A%20%20%20%20%40%2Dwebkit%2Dkeyframes%20slideIn%20%7B%20from%20%7B%20left%3A%20%2D100%25%3B%20%7D%20to%20%7B%20left%3A%200%3B%20%7D%20%20%7D%0A%20%20%20%20%20%20%20%40%2Dmoz%2Dkeyframes%20slideIn%20%7B%20from%20%7B%20left%3A%20%2D100%25%3B%20%7D%20to%20%7B%20left%3A%200%3B%20%7D%20%20%7D%0A%20%20%20%20%20%20%20%20%20%40%2Do%2Dkeyframes%20slideIn%20%7B%20from%20%7B%20left%3A%20%2D100%25%3B%20%7D%20to%20%7B%20left%3A%200%3B%20%7D%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%40keyframes%20slideIn%20%7B%20from%20%7B%20left%3A%20%2D100%25%3B%20%7D%20to%20%7B%20left%3A%200%3B%20%7D%20%20%7D%0A%20%20%20%20%2A%2F%0A%20%20%20%20%0A%20%20%20%20ol%20%7B%0A%20%20%20%20%20%20%20%20overflow%2Dx%3A%20scroll%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20div%2EMathJax%5FDisplay%20%7B%0A%20%20%20%20%20%20%20%20overflow%2Dx%3A%20scroll%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20p%20%7B%0A%20%20%20%20%20%20%20%20overflow%2Dx%3A%20scroll%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%40media%20screen%20and%20%28min%2Dwidth%3A%201300px%29%20%7B%0A%20%20%20%20%2Emobile%2Dhidden%20%7B%0A%20%20%20%20%20%20%20%20display%3A%20block%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%23toggle%2Dnav%20%7B%0A%20%20%20%20%20%20%20%20display%3A%20none%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20body%20%7B%0A%20%20%20%20%20%20%20%20color%3A%20%23333%3B%0A%20%20%20%20%20%20%20%20width%3A%2090%25%3B%0A%20%20%20%20%20%20%20%20max%2Dwidth%3A%20900px%3B%0A%20%20%20%20%20%20%20%20position%3A%20absolute%3B%0A%20%20%20%20%20%20%20%20top%3A%200%3B%0A%20%20%20%20%20%20%20%20left%3A%20300px%3B%0A%20%20%20%20%20%20%20%20right%3A%200%3B%0A%20%20%20%20%20%20%20%20padding%3A%200%2015px%3B%0A%20%20%20%20%20%20%20%20%2Dwebkit%2Doverflow%2Dscrolling%3A%20touch%3B%0A%20%20%20%20%20%20%20%20margin%2Dright%3A%20auto%3B%0A%20%20%20%20%20%20%20%20margin%2Dleft%3A%20auto%3B%0A%20%20%20%20%20%20%20%20position%3A%20absolute%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%23TOC%20%7B%0A%20%20%20%20%20%20%20%20font%2Dsize%3A%2014px%3B%0A%20%20%20%20%20%20%20%20border%2Dright%3A%201px%20solid%20%23e8e8e8%3B%0A%20%20%20%20%20%20%20%20padding%3A%200%2015px%3B%0A%20%20%20%20%20%20%20%20margin%2Dright%3A%200%3B%0A%20%20%20%20%20%20%20%20width%3A%20300px%3B%0A%20%20%20%20%20%20%20%20position%3A%20fixed%3B%0A%20%20%20%20%20%20%20%20top%3A%200%3B%0A%20%20%20%20%20%20%20%20left%3A%200%3B%0A%20%20%20%20%20%20%20%20bottom%3A%200%3B%0A%20%20%20%20%20%20%20%20overflow%2Dy%3A%20auto%3B%0A%20%20%20%20%7D%0A%7D%0A" rel="stylesheet">
</head>
<body>
<div class="navbar">
    <button id="toggle-nav">
        <span class="sr-only">Toggle navigation</span>
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
    </button>
</div>
<header>
<h1 class="title">Notes de cours</h1>
<h2 class="author">Antoine GagnÃ©</h2>
<h3 class="date">19 fÃ©vrier 2016</h3>
</header>
<nav id="TOC">
<ul>
<li><a href="#introduction"><span class="toc-section-number">1</span> Introduction</a><ul>
<li><a href="#architecture-dun-ordinateur"><span class="toc-section-number">1.1</span> Architecture dâun ordinateur</a><ul>
<li><a href="#couche-logiciel"><span class="toc-section-number">1.1.1</span> Couche logiciel</a></li>
<li><a href="#couche-noyau"><span class="toc-section-number">1.1.2</span> Couche noyau</a></li>
<li><a href="#couche-matÃ©riel"><span class="toc-section-number">1.1.3</span> Couche matÃ©riel</a></li>
</ul></li>
<li><a href="#systÃ¨me-dexploitation"><span class="toc-section-number">1.2</span> SystÃ¨me dâexploitation</a><ul>
<li><a href="#dÃ©finition-dun-systÃ¨me-dexploitation"><span class="toc-section-number">1.2.1</span> DÃ©finition dâun systÃ¨me dâexploitation</a></li>
<li><a href="#buts-principaux"><span class="toc-section-number">1.2.2</span> Buts principaux</a></li>
<li><a href="#composantes"><span class="toc-section-number">1.2.3</span> Composantes</a><ul>
<li><a href="#noyau"><span class="toc-section-number">1.2.3.1</span> Noyau</a></li>
<li><a href="#librairie-systÃ¨me"><span class="toc-section-number">1.2.3.2</span> Librairie systÃ¨me</a></li>
<li><a href="#programmes-systÃ¨mes"><span class="toc-section-number">1.2.3.3</span> Programmes systÃ¨mes</a></li>
</ul></li>
</ul></li>
<li><a href="#processeurs"><span class="toc-section-number">1.3</span> Processeurs</a><ul>
<li><a href="#principaux-registres"><span class="toc-section-number">1.3.1</span> Principaux registres</a><ul>
<li><a href="#compteur-ordinal-program-counter-pc"><span class="toc-section-number">1.3.1.1</span> Compteur ordinal / <em>Program Counter</em> (PC)</a></li>
<li><a href="#pointeur-de-pile-stack-pointer"><span class="toc-section-number">1.3.1.2</span> Pointeur de pile / <em>Stack pointer</em></a><ul>
<li><a href="#pile"><span class="toc-section-number">1.3.1.2.1</span> Pile</a></li>
</ul></li>
<li><a href="#mot-dÃ©tat-program-status-word"><span class="toc-section-number">1.3.1.3</span> Mot dâÃ©tat / <em>Program status word</em></a></li>
</ul></li>
</ul></li>
<li><a href="#mÃ©moire"><span class="toc-section-number">1.4</span> MÃ©moire</a></li>
<li><a href="#appel-systÃ¨me"><span class="toc-section-number">1.5</span> Appel systÃ¨me</a><ul>
<li><a href="#dÃ©finition"><span class="toc-section-number">1.5.1</span> DÃ©finition</a><ul>
<li><a href="#exemples"><span class="toc-section-number">1.5.1.1</span> Exemples</a></li>
</ul></li>
<li><a href="#privilÃ¨ges"><span class="toc-section-number">1.5.2</span> PrivilÃ¨ges</a></li>
<li><a href="#table-des-interruptions-idt"><span class="toc-section-number">1.5.3</span> Table des interruptions IDT</a></li>
<li><a href="#exemple-dexÃ©cution-dun-appel-systÃ¨me"><span class="toc-section-number">1.5.4</span> Exemple dâexÃ©cution dâun appel systÃ¨me</a></li>
</ul></li>
</ul></li>
<li><a href="#processus-et-threads"><span class="toc-section-number">2</span> Processus et threads</a><ul>
<li><a href="#processus"><span class="toc-section-number">2.1</span> Processus</a><ul>
<li><a href="#dÃ©finition-1"><span class="toc-section-number">2.1.1</span> DÃ©finition</a></li>
<li><a href="#ordonnanceur"><span class="toc-section-number">2.1.2</span> Ordonnanceur</a></li>
</ul></li>
<li><a href="#fork"><span class="toc-section-number">2.2</span> <code>fork()</code></a><ul>
<li><a href="#exemple-de-fork"><span class="toc-section-number">2.2.1</span> Exemple de <code>fork()</code></a></li>
</ul></li>
<li><a href="#threads"><span class="toc-section-number">2.3</span> Threads</a><ul>
<li><a href="#exemple-de-code-de-threads"><span class="toc-section-number">2.3.1</span> Exemple de code de threads</a></li>
<li><a href="#threads-utilisateurs"><span class="toc-section-number">2.3.2</span> Threads utilisateurs</a><ul>
<li><a href="#avantages"><span class="toc-section-number">2.3.2.1</span> Avantages</a></li>
<li><a href="#dÃ©savantages"><span class="toc-section-number">2.3.2.2</span> DÃ©savantages</a></li>
</ul></li>
<li><a href="#threads-noyau"><span class="toc-section-number">2.3.3</span> Threads noyau</a><ul>
<li><a href="#avantages-1"><span class="toc-section-number">2.3.3.1</span> Avantages</a></li>
</ul></li>
</ul></li>
<li><a href="#conditions-de-concurrence"><span class="toc-section-number">2.4</span> Conditions de concurrence</a><ul>
<li><a href="#spinlocks"><span class="toc-section-number">2.4.1</span> Spinlocks</a><ul>
<li><a href="#solution-de-peterson"><span class="toc-section-number">2.4.1.1</span> Solution de Peterson</a></li>
<li><a href="#test-and-set-lock"><span class="toc-section-number">2.4.1.2</span> Test and Set Lock</a></li>
<li><a href="#xchg"><span class="toc-section-number">2.4.1.3</span> XCHG</a></li>
</ul></li>
<li><a href="#sÃ©maphores"><span class="toc-section-number">2.4.2</span> SÃ©maphores</a><ul>
<li><a href="#posix"><span class="toc-section-number">2.4.2.1</span> POSIX</a></li>
<li><a href="#exemple-dutilisation"><span class="toc-section-number">2.4.2.2</span> Exemple dâutilisation</a></li>
</ul></li>
</ul></li>
<li><a href="#ordonnancement"><span class="toc-section-number">2.5</span> Ordonnancement</a><ul>
<li><a href="#first-come-first-served"><span class="toc-section-number">2.5.1</span> First Come, First Served</a></li>
<li><a href="#shortest-job-first"><span class="toc-section-number">2.5.2</span> Shortest Job First</a></li>
<li><a href="#shortest-remaining-time"><span class="toc-section-number">2.5.3</span> Shortest Remaining Time</a></li>
<li><a href="#round-robin"><span class="toc-section-number">2.5.4</span> Round Robin</a><ul>
<li><a href="#taille-du-quanta"><span class="toc-section-number">2.5.4.1</span> Taille du quanta</a></li>
<li><a href="#file-dexÃ©cution"><span class="toc-section-number">2.5.4.2</span> File dâexÃ©cution</a></li>
</ul></li>
<li><a href="#ordonnanceurs-linux-o1"><span class="toc-section-number">2.5.5</span> Ordonnanceurs Linux (O(1))</a><ul>
<li><a href="#sched_fifo"><span class="toc-section-number">2.5.5.1</span> <code>SCHED_FIFO</code></a></li>
<li><a href="#sched_rr"><span class="toc-section-number">2.5.5.2</span> <code>SCHED_RR</code></a><ul>
<li><a href="#sched_fifo-et-sched_rr"><span class="toc-section-number">2.5.5.2.0.1</span> <code>SCHED_FIFO</code> et <code>SCHED_RR</code></a></li>
</ul></li>
<li><a href="#sched_normal"><span class="toc-section-number">2.5.5.3</span> <code>SCHED_NORMAL</code></a><ul>
<li><a href="#prioritÃ©-statique"><span class="toc-section-number">2.5.5.3.1</span> PrioritÃ© statique</a></li>
<li><a href="#prioritÃ©-dynamique"><span class="toc-section-number">2.5.5.3.2</span> PrioritÃ© dynamique</a></li>
<li><a href="#niveaux-de-prioritÃ©s"><span class="toc-section-number">2.5.5.3.3</span> Niveaux de prioritÃ©s</a></li>
<li><a href="#timeslice"><span class="toc-section-number">2.5.5.3.4</span> Timeslice</a><ul>
<li><a href="#algorithme"><span class="toc-section-number">2.5.5.3.4.1</span> Algorithme</a></li>
<li><a href="#pourcentage-de-temps-de-processeur"><span class="toc-section-number">2.5.5.3.4.2</span> Pourcentage de temps de processeur</a></li>
<li><a href="#sched_yield"><span class="toc-section-number">2.5.5.3.4.3</span> <code>sched_yield()</code></a></li>
</ul></li>
</ul></li>
<li><a href="#faiblesses"><span class="toc-section-number">2.5.5.4</span> Faiblesses</a></li>
</ul></li>
<li><a href="#ordonnanceur-linux-completely-fair-scheduler-ou-cfs"><span class="toc-section-number">2.5.6</span> Ordonnanceur Linux (Completely Fair Scheduler ou CFS)</a><ul>
<li><a href="#poids-w"><span class="toc-section-number">2.5.6.1</span> Poids <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>w</mi></mrow></math></a></li>
<li><a href="#pÃ©riode-t_period"><span class="toc-section-number">2.5.6.2</span> PÃ©riode <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mi>T</mi><mrow><mi>p</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>o</mi><mi>d</mi></mrow></msub></mrow></math></a></li>
<li><a href="#rÃ©alisation"><span class="toc-section-number">2.5.6.3</span> RÃ©alisation</a></li>
<li><a href="#nouveaux-processus"><span class="toc-section-number">2.5.6.4</span> Nouveaux processus</a></li>
<li><a href="#processus-bloquÃ©-qui-se-rÃ©veille"><span class="toc-section-number">2.5.6.5</span> Processus bloquÃ© qui se rÃ©veille</a></li>
<li><a href="#avoir-le-pourcentage-de-temps-de-processeur"><span class="toc-section-number">2.5.6.6</span> Avoir le pourcentage de temps de processeur</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#annexe"><span class="toc-section-number">3</span> Annexe</a></li>
</ul>
</nav>
<section id="introduction" class="level1">
<h1><a href="#introduction"><span class="header-section-number">1</span> Introduction</a></h1>
<p>Ce chapitre est une introduction et fera une brÃ¨ve introduction des systÃ¨mes dâexploitation.</p>
<section id="architecture-dun-ordinateur" class="level2">
<h2><a href="#architecture-dun-ordinateur"><span class="header-section-number">1.1</span> Architecture dâun ordinateur</a></h2>
<p>Un ordinateur est composÃ© de plusieurs couches:</p>
<ul>
<li>Couche logiciel</li>
<li>Couche noyau</li>
<li>Couche matÃ©riel</li>
</ul>
<section id="couche-logiciel" class="level3">
<h3><a href="#couche-logiciel"><span class="header-section-number">1.1.1</span> Couche logiciel</a></h3>
<p>La couche logiciel est la couche dans laquelle vit lâutilisateur. Elle ne peut exÃ©cuter que quelques instructions machines. En particulier, les opÃ©rations qui modifient le contrÃ´le de la machine ou qui font de lâ<strong>entrÃ©e/sortie</strong> (<strong>I/O</strong>) sont interdites dans cette couche.</p>
</section>
<section id="couche-noyau" class="level3">
<h3><a href="#couche-noyau"><span class="header-section-number">1.1.2</span> Couche noyau</a></h3>
<p>La couche noyau est la couche dans laquelle vit le systÃ¨me dâexploitation. Elle a un contrÃ´le absolu sur le matÃ©riel et peut exÃ©cuter nâimporte quelles instructions que la machine permet.</p>
</section>
<section id="couche-matÃ©riel" class="level3">
<h3><a href="#couche-matÃ©riel"><span class="header-section-number">1.1.3</span> Couche matÃ©riel</a></h3>
<p>La couche matÃ©riel est la couche dans laquelle on retrouve le matÃ©riel qui compose lâordinateur ainsi que les instructions machines que les composants permettent.</p>
</section>
</section>
<section id="systÃ¨me-dexploitation" class="level2">
<h2><a href="#systÃ¨me-dexploitation"><span class="header-section-number">1.2</span> SystÃ¨me dâexploitation</a></h2>
<p>Dans cette section, nous verrons briÃ¨vement les systÃ¨mes dâexploitation.</p>
<section id="dÃ©finition-dun-systÃ¨me-dexploitation" class="level3">
<h3><a href="#dÃ©finition-dun-systÃ¨me-dexploitation"><span class="header-section-number">1.2.1</span> DÃ©finition dâun systÃ¨me dâexploitation</a></h3>
<p>Un systÃ¨me dâexploitation est lâensemble des programmes qui communiquent avec le matÃ©riel et contrÃ´lent lâ<strong>allocation des ressources</strong> aux autres programmes du systÃ¨me.</p>
</section>
<section id="buts-principaux" class="level3">
<h3><a href="#buts-principaux"><span class="header-section-number">1.2.2</span> Buts principaux</a></h3>
<p>Les buts dâun systÃ¨me dâexploitation sont</p>
<ul>
<li>Offrir une abstraction de haut-niveau des ressources</li>
<li>GÃ©rer les ressources matÃ©rielles de lâordinateur</li>
</ul>
</section>
<section id="composantes" class="level3">
<h3><a href="#composantes"><span class="header-section-number">1.2.3</span> Composantes</a></h3>
<section id="noyau" class="level4">
<h4><a href="#noyau"><span class="header-section-number">1.2.3.1</span> Noyau</a></h4>
<ul>
<li>Niveau privilÃ¨ge noyau</li>
<li>AccÃ¨s Ã  toutes les ressources</li>
</ul>
</section>
<section id="librairie-systÃ¨me" class="level4">
<h4><a href="#librairie-systÃ¨me"><span class="header-section-number">1.2.3.2</span> Librairie systÃ¨me</a></h4>
<ul>
<li>Niveau privilÃ¨ge utilisateur</li>
<li>Interface pour les appels systÃ¨mes</li>
</ul>
</section>
<section id="programmes-systÃ¨mes" class="level4">
<h4><a href="#programmes-systÃ¨mes"><span class="header-section-number">1.2.3.3</span> Programmes systÃ¨mes</a></h4>
</section>
</section>
</section>
<section id="processeurs" class="level2">
<h2><a href="#processeurs"><span class="header-section-number">1.3</span> Processeurs</a></h2>
<section id="principaux-registres" class="level3">
<h3><a href="#principaux-registres"><span class="header-section-number">1.3.1</span> Principaux registres</a></h3>
<p>Il y a plusieurs registres dans un processeur</p>
<ul>
<li>Compteur ordinal / <em>Program Counter</em> (PC)</li>
<li>Pointeur de pile / <em>Stack pointer</em></li>
<li>Mot dâÃ©tat / <em>Program status word</em></li>
</ul>
<p>Ces registres sont prÃ©servÃ©s lors dâun changement de contexte.</p>
<section id="compteur-ordinal-program-counter-pc" class="level4">
<h4><a href="#compteur-ordinal-program-counter-pc"><span class="header-section-number">1.3.1.1</span> Compteur ordinal / <em>Program Counter</em> (PC)</a></h4>
<p>Ce registre donne lâadresse de lâinstruction en cours.</p>
</section>
<section id="pointeur-de-pile-stack-pointer" class="level4">
<h4><a href="#pointeur-de-pile-stack-pointer"><span class="header-section-number">1.3.1.2</span> Pointeur de pile / <em>Stack pointer</em></a></h4>
<p>Ce registre donne lâadresse courante du sommet de la pile.</p>
<section id="pile" class="level5">
<h5><a href="#pile"><span class="header-section-number">1.3.1.2.1</span> Pile</a></h5>
<p>La pile contient lâadresse de retour des fonctions. Elle contient aussi les paramÃ¨tres lors de lâappel de fonction. Elle contient aussi les variables locales de la fonction.</p>
</section>
</section>
<section id="mot-dÃ©tat-program-status-word" class="level4">
<h4><a href="#mot-dÃ©tat-program-status-word"><span class="header-section-number">1.3.1.3</span> Mot dâÃ©tat / <em>Program status word</em></a></h4>
<p>Ce registre donne lâÃ©tat du processeur et les bits de comparaison (zÃ©ro, overflow, etc.). Il est trÃ¨s important pour les opÃ©rations IO.</p>
</section>
</section>
</section>
<section id="mÃ©moire" class="level2">
<h2><a href="#mÃ©moire"><span class="header-section-number">1.4</span> MÃ©moire</a></h2>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Temps dâaccÃ¨s</th>
<th style="text-align: left;">Couche</th>
<th style="text-align: left;">CapacitÃ©</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1 nsec</td>
<td style="text-align: left;">Registres</td>
<td style="text-align: left;">&lt; 1 KB</td>
</tr>
<tr class="even">
<td style="text-align: left;">2 nsec</td>
<td style="text-align: left;">Cache</td>
<td style="text-align: left;">4 MB</td>
</tr>
<tr class="odd">
<td style="text-align: left;">10 nsec</td>
<td style="text-align: left;">MÃ©moire pricipale</td>
<td style="text-align: left;">1-8 GB</td>
</tr>
<tr class="even">
<td style="text-align: left;">10 msec</td>
<td style="text-align: left;">Bande magnÃ©tique</td>
<td style="text-align: left;">1-4 TB</td>
</tr>
</tbody>
</table>
</section>
<section id="appel-systÃ¨me" class="level2">
<h2><a href="#appel-systÃ¨me"><span class="header-section-number">1.5</span> Appel systÃ¨me</a></h2>
<section id="dÃ©finition" class="level3">
<h3><a href="#dÃ©finition"><span class="header-section-number">1.5.1</span> DÃ©finition</a></h3>
<ul>
<li>FonctionnalitÃ© fournie par le noyau du systÃ¨me dâexploitation</li>
<li>Fait par lâentremise de la librairie systÃ¨me</li>
<li>Doit ultimement tourner en mode noyau</li>
<li>Lâappelant tourne en mode utilisateur</li>
</ul>
<section id="exemples" class="level4">
<h4><a href="#exemples"><span class="header-section-number">1.5.1.1</span> Exemples</a></h4>
<ul>
<li><code>read</code>/<code>write</code>: lecture/Ã©criture fichier</li>
<li><code>brk</code>: gestion de la mÃ©moire</li>
<li><code>fork</code>: crÃ©er un nouveau processus</li>
<li><code>waitpid</code>: attendre la fin dâun processus</li>
<li><code>kill</code>: signaler un processus</li>
<li><code>time</code>: avoir lâheure</li>
</ul>
<p>Il y en a environ 300 sur Linux.</p>
</section>
</section>
<section id="privilÃ¨ges" class="level3">
<h3><a href="#privilÃ¨ges"><span class="header-section-number">1.5.2</span> PrivilÃ¨ges</a></h3>
<ul>
<li>NÃ©cessite un changement de niveau de privilÃ¨ge</li>
<li>Se fait lors de lâexÃ©cution dâinstructions machines particuliÃ¨res:
<ul>
<li>interruption logiciel <code>INT n</code> ou</li>
<li><code>SYSCALL</code>/<code>SYSENTER</code></li>
</ul></li>
</ul>
</section>
<section id="table-des-interruptions-idt" class="level3">
<h3><a href="#table-des-interruptions-idt"><span class="header-section-number">1.5.3</span> Table des interruptions IDT</a></h3>
<ul>
<li>Remplie lors du dÃ©marrage par la fonction <code>trap_init()</code></li>
<li>Toutes des fonctions du noyau</li>
<li><code>int 0x80</code> est une instruction assembleur qui spÃ©cifie au systÃ¨me de passer le contrÃ´le au noyau</li>
</ul>
</section>
<section id="exemple-dexÃ©cution-dun-appel-systÃ¨me" class="level3">
<h3><a href="#exemple-dexÃ©cution-dun-appel-systÃ¨me"><span class="header-section-number">1.5.4</span> Exemple dâexÃ©cution dâun appel systÃ¨me</a></h3>
<pre class="sourceCode C"><code class="sourceCode c">cpt = read(df, &amp;tampon, nbOctets);</code></pre>
</section>
</section>
</section>
<section id="processus-et-threads" class="level1">
<h1><a href="#processus-et-threads"><span class="header-section-number">2</span> Processus et threads</a></h1>
<section id="processus" class="level2">
<h2><a href="#processus"><span class="header-section-number">2.1</span> Processus</a></h2>
<section id="dÃ©finition-1" class="level3">
<h3><a href="#dÃ©finition-1"><span class="header-section-number">2.1.1</span> DÃ©finition</a></h3>
<p>Une instance de programme qui sâexÃ©cute.</p>
</section>
<section id="ordonnanceur" class="level3">
<h3><a href="#ordonnanceur"><span class="header-section-number">2.1.2</span> Ordonnanceur</a></h3>
<p>Responsable de choisir le processus Ã  exÃ©cuter.</p>
</section>
</section>
<section id="fork" class="level2">
<h2><a href="#fork"><span class="header-section-number">2.2</span> <code>fork()</code></a></h2>
<p>Lorsque <code>fork()</code> est appelÃ©</p>
<ul>
<li>Le processus se duplique</li>
<li>Un processus enfant est crÃ©Ã©</li>
<li>La mÃ©moire qui va Ãªtre Ã©crite est copiÃ©e</li>
<li>Si la mÃ©moire nâest pas Ã©crite, le systÃ¨me dâexploitation va faire pointer les adresses virtuelles vers les mÃªmes adresses physiques</li>
</ul>
<section id="exemple-de-fork" class="level3">
<h3><a href="#exemple-de-fork"><span class="header-section-number">2.2.1</span> Exemple de <code>fork()</code></a></h3>
<pre class="sourceCode C"><code class="sourceCode c"><span class="dt">int</span> main(<span class="dt">void</span>)
{
   pid_t pid = fork();

   <span class="kw">if</span> (pid == -<span class="dv">1</span>) {
      perror(<span class="st">&quot;fork failed&quot;</span>);
      exit(EXIT_FAILURE);
   }
   <span class="kw">else</span> <span class="kw">if</span> (pid == <span class="dv">0</span>) {
      printf(<span class="st">&quot;Hello from the child process!</span><span class="ch">\n</span><span class="st">&quot;</span>);
      _exit(EXIT_SUCCESS);
   }
   <span class="kw">else</span> {
      <span class="dt">int</span> status;
      (<span class="dt">void</span>)waitpid(pid, &amp;status, <span class="dv">0</span>);
   }
   <span class="kw">return</span> EXIT_SUCCESS;
}</code></pre>
<pre class="sourceCode C"><code class="sourceCode c"><span class="ot">#include &lt;unistd.h&gt;</span>
<span class="ot">#include &lt;sys/types.h&gt;</span>
<span class="ot">#include &lt;sys/wait.h&gt;</span>

<span class="dt">int</span> main ( <span class="dt">int</span> argc, <span class="dt">char</span> *argv[ ] ) {
    <span class="dt">int</span> LePid;
    LePid=fork();
    <span class="kw">if</span> (LePid==<span class="dv">0</span>) { <span class="co">/* fils */</span>
        printf(âje suis le fils %d\nâ,getpid());
        sleep(<span class="dv">10</span>); exit();
    }
    <span class="kw">else</span> { <span class="co">/* le parent seulement */</span>
        printf(âje suis le pÃ¨re %d\nâ,getpid());
        wait(<span class="dv">0</span>);
    }
}</code></pre>
</section>
</section>
<section id="threads" class="level2">
<h2><a href="#threads"><span class="header-section-number">2.3</span> Threads</a></h2>
<ul>
<li>Partage de lâespace dâadressage
<ul>
<li>Partager variables globales</li>
<li>Pas de protection mÃ©moire entre thread</li>
</ul></li>
<li>Partage des ressources</li>
<li>Chaque thread a sa pile</li>
<li>Beaucoup plus rapide Ã  crÃ©er quâun processus, car moins de ressources associÃ©es (tableau de donnÃ©es beaucoup plus petit)</li>
</ul>
<section id="exemple-de-code-de-threads" class="level3">
<h3><a href="#exemple-de-code-de-threads"><span class="header-section-number">2.3.1</span> Exemple de code de threads</a></h3>
<pre class="sourceCode C"><code class="sourceCode c"><span class="dt">void</span> *print_hello(<span class="dt">void</span> *tnum) {
    printf(âBonjour je suis le thread %d\nâ,*(<span class="dt">int</span>*)tnum);
    pthread_exit(NULL);
}
<span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[]) {
    <span class="co">// Le programme cree 10 threads et se termine</span>
    <span class="dt">int</span> status, i, Arg[N_THREADS];
    <span class="kw">for</span> (i=<span class="dv">0</span>; i &lt; N_THREADS; i++) {
        Arg[i] = i;
        printf(âMain(): en train de creer thread %d\nâ,i);
        status = pthread_create(&amp;threads[i], NULL, print_hello, (<span class="dt">void</span> *)&amp;Arg[i]);
        <span class="kw">if</span> (status != <span class="dv">0</span>) {
        printf(âoops, pthread a retourne le code dâerreur %d\nâ,status);
        exit(-<span class="dv">1</span>);
        }
    }
    <span class="co">// Attendre la fin des threads</span>
    <span class="kw">for</span> (i=<span class="dv">0</span>; i &lt; N_THREADS; i++) { pthread_join(threads[i], NULL); }
    exit(NULL);
}</code></pre>
<pre class="sourceCode C"><code class="sourceCode c"><span class="dt">void</span> *print_hello(<span class="dt">void</span> *tnum) {
    printf(âBonjour je suis le thread %d\nâ,*(<span class="dt">int</span>*)tnum);
    pthread_exit(NULL);
}

<span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[]) {
    <span class="co">// Le programme cree 10 threads et se termine</span>
    pthread_t threads[N_THREADS];
    <span class="dt">int</span> status, i, Arg[N_THREADS];
    <span class="kw">for</span> (i=<span class="dv">0</span>; i &lt; N_THREADS; i++) {
        Arg[i] = i;
        printf(âMain(): en train de creer thread %d\nâ,i);
        status = pthread_create(&amp;threads[i], NULL, print_hello, (<span class="dt">void</span> *)&amp;Arg[i]);
        <span class="kw">if</span> (status != <span class="dv">0</span>) {
            printf(âoops, pthread a retourne le code dâerreur %d\nâ,status);
            exit(-<span class="dv">1</span>);
        }
        pthread_join(threads[i], NULL);
    }
    exit(NULL);
}</code></pre>
</section>
<section id="threads-utilisateurs" class="level3">
<h3><a href="#threads-utilisateurs"><span class="header-section-number">2.3.2</span> Threads utilisateurs</a></h3>
<section id="avantages" class="level4">
<h4><a href="#avantages"><span class="header-section-number">2.3.2.1</span> Avantages</a></h4>
<ul>
<li>Plus efficace, car pas besoin de passer par le noyau</li>
</ul>
</section>
<section id="dÃ©savantages" class="level4">
<h4><a href="#dÃ©savantages"><span class="header-section-number">2.3.2.2</span> DÃ©savantages</a></h4>
<ul>
<li>Difficile dâimplÃ©menter parfaitement
<ul>
<li>DÃ©tecter les appels bloquants
<ul>
<li>pour occuper un autre thread pendant lâattente</li>
</ul></li>
<li>lâidÃ©e de base des threads Ã©tait de ne pas sâen faire avec les appels bloquants</li>
<li>RÃ©Ã©crire certaines fonctions systÃ¨mes avec <code>select()</code></li>
</ul></li>
<li>Pas de prÃ©emption
<ul>
<li>Processus ne peut pas interrompre un thread</li>
<li>Les threads doivent coopÃ©rer</li>
</ul></li>
</ul>
</section>
</section>
<section id="threads-noyau" class="level3">
<h3><a href="#threads-noyau"><span class="header-section-number">2.3.3</span> Threads noyau</a></h3>
<section id="avantages-1" class="level4">
<h4><a href="#avantages-1"><span class="header-section-number">2.3.3.1</span> Avantages</a></h4>
<ul>
<li>Ordonnanceur du systÃ¨me dâexploitation va pouvoir
<ul>
<li>prÃ©emption du thread en cours</li>
<li>dÃ©tecter appels systÃ¨mes bloquants</li>
</ul></li>
</ul>
</section>
</section>
</section>
<section id="conditions-de-concurrence" class="level2">
<h2><a href="#conditions-de-concurrence"><span class="header-section-number">2.4</span> Conditions de concurrence</a></h2>
<ul>
<li>Partager un systÃ¨me de stockage (Ã©criture/lecture)
<ul>
<li>fichiers (e.g.Â ajouts parallÃ¨les dans un rÃ©pertoire)</li>
<li>base de donnÃ©es</li>
<li>mÃ©moire partagÃ©e (<em>shared memory</em>)</li>
</ul></li>
<li>Si deux processus tentent dâaccÃ©der Ã  ce stockage partagÃ©, il peut y avoir des bogues subtils:
<ul>
<li>conditions de concurrence / <em>race condition</em></li>
</ul></li>
</ul>
<section id="spinlocks" class="level3">
<h3><a href="#spinlocks"><span class="header-section-number">2.4.1</span> Spinlocks</a></h3>
<section id="solution-de-peterson" class="level4">
<h4><a href="#solution-de-peterson"><span class="header-section-number">2.4.1.1</span> Solution de Peterson</a></h4>
<pre class="sourceCode C"><code class="sourceCode c"><span class="dt">int</span> critical[<span class="dv">2</span>];

<span class="dt">void</span> enter_region(<span class="dt">int</span> process) {
    <span class="dt">int</span> other;
    other = <span class="dv">1</span> - process; <span class="co">// Position 1</span>
    critical[process]=<span class="dv">1</span>; <span class="co">// Position 2</span>
    waiting = process;
    <span class="kw">while</span>(waiting==process&amp;&amp;critical[other] == <span class="dv">1</span>);
}

<span class="dt">void</span> leave_region(<span class="dt">int</span> process) {
    critical[process] = <span class="dv">0</span>;
}</code></pre>
</section>
<section id="test-and-set-lock" class="level4">
<h4><a href="#test-and-set-lock"><span class="header-section-number">2.4.1.2</span> Test and Set Lock</a></h4>
<pre class="ARM"><code>enter_region:
    TSL EAX, LOCK    | copie LOCK dans registre EAX, LOCK = 1
    CMP EAX, #0      | LOCK Ã©tait-elle Ã  0?
    JNE enter_region | si LOCK pas Ã  0, boucle
    RET              | LOCK libre, entre dans section critique

leave_region:
    MOV LOCK, #0     | Ã©crit un 0 dans LOCK
    RET              | retourne Ã  lâappelant</code></pre>
</section>
<section id="xchg" class="level4">
<h4><a href="#xchg"><span class="header-section-number">2.4.1.3</span> XCHG</a></h4>
<pre class="ASM"><code>enter_region:
    MOV EAX, #1       | copie LOCK dans registre, LOCK = EAX
    XCHG EAX, LOCK    | LOCK Ã©tait-elle Ã  0?
    CMP EAX, #0       | si LOCK pas Ã  0, boucle
    JNE enter_region  | LOCK libre, entre dans section critique
    RET
leave_region:
    MOV LOCK, #0      | Ã©crit un 0 dans LOCK
    RET               | retourne Ã  lâappelant</code></pre>
</section>
</section>
<section id="sÃ©maphores" class="level3">
<h3><a href="#sÃ©maphores"><span class="header-section-number">2.4.2</span> SÃ©maphores</a></h3>
<section id="posix" class="level4">
<h4><a href="#posix"><span class="header-section-number">2.4.2.1</span> POSIX</a></h4>
<pre class="sourceCode C"><code class="sourceCode c">sem_init()      <span class="co">// initialiser sÃ©maphore sans nom</span>
sem_open()      <span class="co">// ouvrir un sÃ©maphore avec nom</span>
sem_close()     <span class="co">// fermer un sÃ©maphore avec nom</span>
sem_unlink()    <span class="co">// enlever sÃ©maphore avec nom</span>
sem_wait()      <span class="co">// down</span>
sem_post()      <span class="co">// up</span>
sem_getvalue()  <span class="co">// valeur du sÃ©maphore</span>
sem_destroy()   <span class="co">// dÃ©truire un sÃ©maphore crÃ©Ã© par sem_init</span></code></pre>
</section>
<section id="exemple-dutilisation" class="level4">
<h4><a href="#exemple-dutilisation"><span class="header-section-number">2.4.2.2</span> Exemple dâutilisation</a></h4>
<pre class="sourceCode C"><code class="sourceCode c"><span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[]) {
    <span class="co">// Un seul sÃ©maphore, pour le processus</span>
    sem_t *pSemaphore = sem_open(<span class="st">&quot;UnNomUnique5&quot;</span>, O_CREAT, <span class="dv">0644</span>, <span class="dv">1</span>);
    <span class="kw">if</span> (pSemaphore == SEM_FAILED) {
        <span class="kw">return</span> -<span class="dv">1</span>;
    }
    <span class="dt">int</span> i;
    <span class="kw">for</span> (i = <span class="dv">0</span>; i&lt;<span class="dv">10</span>; i++) {
        sem_wait(pSemaphore);
        printf(<span class="st">&quot;Processus %d dans la section critique</span><span class="ch">\n</span><span class="st">&quot;</span>,getpid());
        sleep(<span class="dv">1</span>);
        sem_post(pSemaphore);
    }
    exit(<span class="dv">0</span>);
}</code></pre>
</section>
</section>
</section>
<section id="ordonnancement" class="level2">
<h2><a href="#ordonnancement"><span class="header-section-number">2.5</span> Ordonnancement</a></h2>
<section id="first-come-first-served" class="level3">
<h3><a href="#first-come-first-served"><span class="header-section-number">2.5.1</span> First Come, First Served</a></h3>
<p>Le premier arrivÃ© dans la file de threads/processus est le premier exÃ©cutÃ©.</p>
</section>
<section id="shortest-job-first" class="level3">
<h3><a href="#shortest-job-first"><span class="header-section-number">2.5.2</span> Shortest Job First</a></h3>
<p>Celui qui a le temps dâexÃ©cution le plus court est exÃ©cutÃ© en premier. Si un processus a un temps dâexÃ©cution plus court que que les autres, mais quâil a un temps dâarrivÃ© qui fait quâil arrive aprÃ¨s les autres, il sera exÃ©cutÃ© aprÃ¨s lâexÃ©cution du processus courant.</p>
</section>
<section id="shortest-remaining-time" class="level3">
<h3><a href="#shortest-remaining-time"><span class="header-section-number">2.5.3</span> Shortest Remaining Time</a></h3>
<p>On prend le processus qui a le temps le plus court et on lâeffectue en premier. Ã chaque fois quâun nouveau processus arrive, on dÃ©duit le temps dâexÃ©cution qui sâest Ã©coulÃ© du temps du processus actuel et on regarde si avec cette dÃ©duction, on est mieux de changer de processus.</p>
</section>
<section id="round-robin" class="level3">
<h3><a href="#round-robin"><span class="header-section-number">2.5.4</span> Round Robin</a></h3>
<p>Lâordonnanceur prend un quanta de temps (exemple: 4 ms) et exÃ©cute le premier processus. Si celui peut encore sâexÃ©cuter Ã  la fin du quanta, lâordonnanceur le place Ã  la fin de la file et il prend le prochain processus. Il effectue ensuite la mÃªme Ã©tape avec le nouveau processus et ainsi de suite jusquâÃ  ce que tous les processus soient finis.</p>
<section id="taille-du-quanta" class="level4">
<h4><a href="#taille-du-quanta"><span class="header-section-number">2.5.4.1</span> Taille du quanta</a></h4>
<p>Il ne faut pas que le quanta soit trop petit, car, sinon, il y aura des pertes de temps lors des frÃ©quents changements de processus. Il ne faut pas non plus quâil soit trop long, sinon il risque dây avoir des pertes de temps si les processus sont plus courts. Aussi, la rÃ©ponse sera moins fluide, car les processus seront exÃ©cutÃ©s plus longtemps individuellement.</p>
</section>
<section id="file-dexÃ©cution" class="level4">
<h4><a href="#file-dexÃ©cution"><span class="header-section-number">2.5.4.2</span> File dâexÃ©cution</a></h4>
<ul>
<li>1 file <strong>expirÃ©e</strong>, 1 file <strong>active</strong></li>
<li>1 paire par CPU</li>
<li>140 niveaux de prioritÃ©s</li>
<li>Petit numÃ©ro = grande prioritÃ©</li>
<li>Quand toutes les tÃ¢ches sont expirÃ©es, Ã©changer les files: <strong>epoch</strong> (intervertir les pointeurs des files)</li>
</ul>
</section>
</section>
<section id="ordonnanceurs-linux-o1" class="level3">
<h3><a href="#ordonnanceurs-linux-o1"><span class="header-section-number">2.5.5</span> Ordonnanceurs Linux (O(1))</a></h3>
<ul>
<li>Trois <strong>policy</strong>:
<ul>
<li><code>SCHE_FIFO</code>
<ul>
<li>Temps rÃ©el, pas de prÃ©emption -&gt; pas de quantum</li>
</ul></li>
<li><code>SCHED_RR</code>
<ul>
<li>Temps rÃ©el, prÃ©emption -&gt; timeslice</li>
</ul></li>
<li><code>SCHED_NORMAL</code>
<ul>
<li>Pour les threads normaux</li>
<li>Vos processus et threads</li>
</ul></li>
</ul></li>
</ul>
<section id="sched_fifo" class="level4">
<h4><a href="#sched_fifo"><span class="header-section-number">2.5.5.1</span> <code>SCHED_FIFO</code></a></h4>
<dl>
<dt><strong>FIFO</strong></dt>
<dd>First In First Out
</dd>
</dl>
<ul>
<li>Premier arrivÃ©, premier servi</li>
<li>Sans prÃ©emption, sauf si nouveau plut haute prioritÃ© arrive (<em>danger boucle sans fin!</em>)</li>
<li>Processus doit avoir les droits <strong>superuser</strong></li>
</ul>
</section>
<section id="sched_rr" class="level4">
<h4><a href="#sched_rr"><span class="header-section-number">2.5.5.2</span> <code>SCHED_RR</code></a></h4>
<ul>
<li>Peuvent Ãªtre prÃ©empter par <code>SCHED_FIFO</code></li>
<li>PossÃ¨dent un quantum</li>
<li>Tourniquet par niveau de prioritÃ©</li>
<li>Processus doit avoir les droits <strong>superuser</strong></li>
</ul>
<section id="sched_fifo-et-sched_rr" class="level6">
<h6><a href="#sched_fifo-et-sched_rr"><span class="header-section-number">2.5.5.2.0.1</span> <code>SCHED_FIFO</code> et <code>SCHED_RR</code></a></h6>
<ul>
<li>Vont tourner tant quâils ont besoin de temps</li>
<li>Lorsquâils ont tout terminÃ©, lâordonnanceur O(1) commence Ã  exÃ©cuter les threads dans <code>SCHED_NORMAL</code></li>
</ul>
</section>
</section>
<section id="sched_normal" class="level4">
<h4><a href="#sched_normal"><span class="header-section-number">2.5.5.3</span> <code>SCHED_NORMAL</code></a></h4>
<section id="prioritÃ©-statique" class="level5">
<h5><a href="#prioritÃ©-statique"><span class="header-section-number">2.5.5.3.1</span> PrioritÃ© statique</a></h5>
<ul>
<li>On attribue un niveau de prioritÃ© statique <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mi>P</mi><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>q</mi><mi>u</mi><mi>e</mi></mrow></msub></mrow></math> Ã  chaque processus</li>
<li>Varie entre -20 et -19</li>
<li>Par dÃ©faut, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mi>P</mi><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>q</mi><mi>u</mi><mi>e</mi></mrow></msub><mo>=</mo><mn>0</mn></mrow></math></li>
<li>Changer <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mi>P</mi><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>q</mi><mi>u</mi><mi>e</mi></mrow></msub></mrow></math> avec <strong>nice</strong> ou <strong>setpriority()</strong>
<ul>
<li>valeur positive -&gt; rÃ©duire prioritÃ©
<ul>
<li>pour des longues simulations Ã  tourner</li>
</ul></li>
<li>valeur nÃ©gative -&gt; augmenter prioritÃ©
<ul>
<li>besoin dâÃªtre <strong>superuser</strong></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="prioritÃ©-dynamique" class="level5">
<h5><a href="#prioritÃ©-dynamique"><span class="header-section-number">2.5.5.3.2</span> PrioritÃ© dynamique</a></h5>
<ul>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mi>P</mi><mrow><mi>d</mi><mi>y</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>i</mi><mi>q</mi><mi>u</mi><mi>e</mi></mrow></msub></mrow></math> est ajustÃ©e automatiquement par le systÃ¨me dâexploitation</li>
<li>BasÃ©e sur des heuristiques</li>
<li>CalculÃ© Ã  partir du temps quâun thread passe bloquÃ©
<ul>
<li>plus il bloque longtemps, plus $P_{dynamique} augmente</li>
</ul></li>
<li>Ne sâapplique pas au temps rÃ©el
<ul>
<li><code>SCHED_FIFO</code></li>
<li><code>SCHED_RR</code></li>
</ul></li>
</ul>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mo>â</mo><mn>5</mn><mo>â¤</mo><msub><mi>P</mi><mrow><mi>d</mi><mi>y</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>i</mi><mi>q</mi><mi>u</mi><mi>e</mi></mrow></msub><mo>â¤</mo><mn>5</mn></mrow></math></p>
</section>
<section id="niveaux-de-prioritÃ©s" class="level5">
<h5><a href="#niveaux-de-prioritÃ©s"><span class="header-section-number">2.5.5.3.3</span> Niveaux de prioritÃ©s</a></h5>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mi>P</mi><mrow><mi>s</mi><mi>c</mi><mi>h</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>=</mo><mn>120</mn><mo>+</mo><msub><mi>P</mi><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>q</mi><mi>u</mi><mi>e</mi></mrow></msub><mo>+</mo><msub><mi>P</mi><mrow><mi>d</mi><mi>y</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>i</mi><mi>q</mi><mi>u</mi><mi>e</mi></mrow></msub></mrow></math></p>
<p>oÃ¹ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mo>â</mo><mn>20</mn><mo>â¤</mo><msub><mi>P</mi><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>q</mi><mi>u</mi><mi>e</mi></mrow></msub><mo>â¤</mo><mn>19</mn></mrow></math> et <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mo>â</mo><mn>5</mn><mo>â¤</mo><msub><mi>P</mi><mrow><mi>d</mi><mi>y</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>i</mi><mi>q</mi><mi>u</mi><mi>e</mi></mrow></msub><mo>â¤</mo><mo>+</mo><mn>5</mn></mrow></math></p>
<ul>
<li>Doit rester dans la plage 100 Ã  139</li>
</ul>
</section>
<section id="timeslice" class="level5">
<h5><a href="#timeslice"><span class="header-section-number">2.5.5.3.4</span> Timeslice</a></h5>
<p>Les processus <strong>hautes prioritÃ©s statiques</strong> vont recevoir plus de temps de calcul: <strong>timeslice</strong></p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mtext mathvariant="normal">Timeslice</mtext><mo>=</mo><mrow><mo stretchy="true">{</mo><mtable><mtr><mtd><mo stretchy="false">(</mo><mn>140</mn><mo>â</mo><mi>S</mi><mi>P</mi><mo stretchy="false">)</mo><mo>Ã</mo><mn>20</mn></mtd><mtd><mtext mathvariant="normal">if</mtext><mspace width="0.333em"></mspace><mspace width="0.333em"></mspace><mi>S</mi><mi>P</mi><mo>&lt;</mo><mn>120</mn><mtext mathvariant="normal">(besoin superuser)</mtext></mtd></mtr><mtr><mtd><mo stretchy="false">(</mo><mn>140</mn><mo>â</mo><mi>S</mi><mi>P</mi><mo stretchy="false">)</mo><mo>Ã</mo><mn>5</mn></mtd><mtd><mtext mathvariant="normal">if</mtext><mspace width="0.333em"></mspace><mspace width="0.333em"></mspace><mi>S</mi><mi>P</mi><mo>â¥</mo><mn>120</mn></mtd></mtr></mtable></mrow></mrow></math></p>
<section id="algorithme" class="level6">
<h6><a href="#algorithme"><span class="header-section-number">2.5.5.3.4.1</span> Algorithme</a></h6>
<ol type="1">
<li>On commence par la prioritÃ© 100</li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mo>â</mo><mi>P</mi></mrow></math>:
<ol type="a">
<li>On exÃ©cute chaque processus pendant le <strong>timeslice</strong></li>
<li>Si le processu ne termine pas, prÃ©empte et transfert dans la file expirÃ©e, et exÃ©cute le suivant dans <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>P</mi></mrow></math></li>
<li>Si <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>P</mi></mrow></math> est vide, on fait <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>P</mi><mo>=</mo><mi>P</mi><mo>+</mo><mn>1</mn></mrow></math> (on descend)</li>
<li>Si <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>P</mi></mrow></math> est Ã  140, la file active est vide:
<ol type="i">
<li>Intervertit la file vide avec la file expirÃ©e</li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>P</mi><mo>=</mo><mn>100</mn></mrow></math></li>
<li>On recommence les Ã©tapes prÃ©cÃ©dentes</li>
</ol></li>
</ol></li>
</ol>
</section>
<section id="pourcentage-de-temps-de-processeur" class="level6">
<h6><a href="#pourcentage-de-temps-de-processeur"><span class="header-section-number">2.5.5.3.4.2</span> Pourcentage de temps de processeur</a></h6>
<p>Pour avoir le pourcentage de temps de processeur utilisÃ©, on utilise la formule suivante:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mfrac><msub><mtext mathvariant="normal">Timeslice</mtext><mi>i</mi></msub><mrow><munderover><mo>â</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mtext mathvariant="normal">Timeslice</mtext><mi>j</mi></msub></mrow></mfrac></mrow></math></p>
<p>oÃ¹ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mtext mathvariant="normal">Timeslice</mtext><mi>i</mi></msub></mrow></math> est le timeslice du processus dont on souhaite avoir le pourcentage et <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><munderover><mo>â</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mtext mathvariant="normal">Timeslice</mtext><mi>j</mi></msub></mrow></math> est la somme des timeslices de tous les autres processus (y compris le processus courant).</p>
</section>
<section id="sched_yield" class="level6">
<h6><a href="#sched_yield"><span class="header-section-number">2.5.5.3.4.3</span> <code>sched_yield()</code></a></h6>
<ul>
<li>Dit au systÃ¨me dâexploitation quâon veut cÃ©der son tour</li>
<li>Lâordonnanceur dÃ©place le thread appelant de la <strong>file active</strong> Ã  la <strong>file expirÃ©e</strong></li>
<li>Tous les autres threads seront rÃ©-exÃ©cutÃ©s avant que lâappelant du <code>sched_yield()</code> ne reÃ§oive le processeur de nouveau.</li>
</ul>
</section>
</section>
</section>
<section id="faiblesses" class="level4">
<h4><a href="#faiblesses"><span class="header-section-number">2.5.5.4</span> Faiblesses</a></h4>
<ul>
<li>Performe bien pour des serveurs de calcul</li>
<li>Pour des ordinateurs personnels, processus interactifs souffrent
<ul>
<li><em>IO-bound</em>, car ils attendent sur le clavier et la souris</li>
</ul></li>
<li>Processus de faibles prioritÃ©s peuvent souffrir de famine</li>
<li>Ratio entre les <em>timeslices</em> de prioritÃ© consÃ©cutives varie grandement</li>
</ul>
</section>
</section>
<section id="ordonnanceur-linux-completely-fair-scheduler-ou-cfs" class="level3">
<h3><a href="#ordonnanceur-linux-completely-fair-scheduler-ou-cfs"><span class="header-section-number">2.5.6</span> Ordonnanceur Linux (Completely Fair Scheduler ou CFS)</a></h3>
<ul>
<li>Cherche Ã  simuler un processeur parfait et offrir <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mfrac><mn>1</mn><mi>N</mi></mfrac></mrow></math> du processeur aux <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>N</mi></mrow></math> processusâ¦</li>
<li>â¦ mais aussi en tenant compte de leur prioritÃ©</li>
<li>Juste entre les diffÃ©rents utilisateurs aussi</li>
<li>Lâalgorithme sâapplique seulement Ã  <code>SCHED_NORMAL</code></li>
</ul>
<section id="poids-w" class="level4">
<h4><a href="#poids-w"><span class="header-section-number">2.5.6.1</span> Poids <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>w</mi></mrow></math></a></h4>
<ul>
<li>Pour chaque niveau de prioritÃ©, on associe un poids <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>w</mi></mrow></math></li>
<li>Progression gÃ©omÃ©trique, avec ratio de 1.25 entre les valeurs de prioritÃ©s consÃ©cutives</li>
</ul>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mfrac><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>p</mi><mo>â</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo></mrow></mfrac><mo>â</mo><mn>1</mn><mo>.</mo><mn>25</mn></mrow></math></p>
<ul>
<li>La fraction moyenne dâexÃ©cution dÃ©sirÃ©e pour chaque thread <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>i</mi></mrow></math> sera</li>
</ul>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mfrac><msub><mi>w</mi><mi>i</mi></msub><mrow><munderover><mo>â</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>w</mi><mi>j</mi></msub></mrow></mfrac></mrow></math></p>
<p>oÃ¹ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>N</mi></mrow></math> est le nombre de processus prÃªt Ã  tourner</p>
</section>
<section id="pÃ©riode-t_period" class="level4">
<h4><a href="#pÃ©riode-t_period"><span class="header-section-number">2.5.6.2</span> PÃ©riode <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mi>T</mi><mrow><mi>p</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>o</mi><mi>d</mi></mrow></msub></mrow></math></a></h4>
<ul>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mi>T</mi><mrow><mi>p</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>o</mi><mi>d</mi></mrow></msub></mrow></math>: PÃ©riode pendant laquelle on voudrait idÃ©alement faire tourner chacun des <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>N</mi></mrow></math> threads une fois</li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mi>T</mi><mrow><mi>s</mi><mi>l</mi><mi>i</mi><mi>c</mi><mi>e</mi></mrow></msub></mrow></math>: Temps dâexÃ©cution du thread <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>i</mi></mrow></math>:</li>
</ul>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mi>T</mi><mrow><mi>s</mi><mi>l</mi><mi>i</mi><mi>c</mi><mi>e</mi></mrow></msub><mo>=</mo><msub><mi>T</mi><mrow><mi>p</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>o</mi><mi>d</mi></mrow></msub><mfrac><msub><mi>w</mi><mi>i</mi></msub><munderover><mo>â</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover></mfrac></mrow></math></p>
<p>IdÃ©alement, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mi>T</mi><mrow><mi>p</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>o</mi><mi>d</mi></mrow></msub><mo>=</mo><mn>15</mn><mspace width="0.333em"></mspace><mtext mathvariant="normal">ms</mtext></mrow></math></p>
</section>
<section id="rÃ©alisation" class="level4">
<h4><a href="#rÃ©alisation"><span class="header-section-number">2.5.6.3</span> RÃ©alisation</a></h4>
<ul>
<li>Ã chaque <em>top dâhorloge</em> (intervalle <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mo>Î</mo><mi>t</mi><mo>=</mo><mn>1</mn><mo>.</mo><mn>4</mn></mrow></math> ou <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mn>10</mn><mspace width="0.333em"></mspace><mtext mathvariant="normal">ms</mtext></mrow></math>), lâordonnanceur:
<ul>
<li>Ajuste le <strong>vruntime</strong> du processus en cours par plus <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mfrac><mn>1024</mn><mi>w</mi></mfrac><mo>Î</mo><mi>t</mi></mrow></math></li>
<li>VÃ©rifie sâil a tournÃ© plus que <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mi>T</mi><mrow><mi>s</mi><mi>l</mi><mi>i</mi><mi>c</mi><mi>e</mi></mrow></msub></mrow></math>. Si oui, on insÃ¨re le processus en cours dans la liste, puis on choisi le nouveau processus (ou thread) qui a le plus petit <strong>vruntime</strong> dans la liste triÃ©e (un <em>red-black tree</em>)</li>
</ul></li>
<li><strong>vruntime</strong> va permettre de corriger, Ã  la longue, les erreurs dâarrondi dâexÃ©cution</li>
</ul>
</section>
<section id="nouveaux-processus" class="level4">
<h4><a href="#nouveaux-processus"><span class="header-section-number">2.5.6.4</span> Nouveaux processus</a></h4>
<ul>
<li>Ordonnanceur lui donne le plus petit runtime de la liste:</li>
</ul>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mtext mathvariant="normal">vruntime</mtext><mspace width="0.333em"></mspace><mo>=</mo><mspace width="0.333em"></mspace><mtext mathvariant="normal">min</mtext><mo stretchy="false">(</mo><msub><mi>P</mi><mi>i</mi></msub><mo>.</mo><mtext mathvariant="normal">vruntime</mtext><mo stretchy="false">)</mo></mrow></math></p>
<ul>
<li>Favorise lâexÃ©cution rapide du nouveau processus</li>
</ul>
</section>
<section id="processus-bloquÃ©-qui-se-rÃ©veille" class="level4">
<h4><a href="#processus-bloquÃ©-qui-se-rÃ©veille"><span class="header-section-number">2.5.6.5</span> Processus bloquÃ© qui se rÃ©veille</a></h4>
<ul>
<li>Donner une certaine prioritÃ© au rÃ©veil: <strong>interactivitÃ©</strong></li>
<li>Si processus dors moins longtemps que <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mi>T</mi><mrow><mi>p</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>o</mi><mi>d</mi></mrow></msub></mrow></math>:
<ul>
<li>Ordonnanceur rÃ©insÃ¨re dans la file sans toucher Ã  son <strong>vruntime</strong></li>
</ul></li>
<li>Si processus dort plus longtemps que <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mi>T</mi><mrow><mi>p</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>o</mi><mi>d</mi></mrow></msub></mrow></math>:
<ul>
<li>Lui donner <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mtext mathvariant="normal">vruntime</mtext><mspace width="0.333em"></mspace><mo>=</mo><mspace width="0.333em"></mspace><mtext mathvariant="normal">min</mtext><mo stretchy="false">(</mo><msub><mi>P</mi><mi>i</mi></msub><mo>.</mo><mtext mathvariant="normal">vruntime</mtext><mo stretchy="false">)</mo></mrow></math> dans la file</li>
<li>A pour effet de le faire dÃ©marrer rapidement</li>
<li>Assure que son vruntime nâest pas artificiellement trÃ¨s faible (si a dormi longtemps)</li>
</ul></li>
</ul>
</section>
<section id="avoir-le-pourcentage-de-temps-de-processeur" class="level4">
<h4><a href="#avoir-le-pourcentage-de-temps-de-processeur"><span class="header-section-number">2.5.6.6</span> Avoir le pourcentage de temps de processeur</a></h4>
<p>Pour avoir le pourcentage de temps de processeur pour chaque processus, on utilise la formule suivante:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mfrac><msub><mi>w</mi><mi>i</mi></msub><munderover><mo>â</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover></mfrac></mrow></math></p>
<p>oÃ¹ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msub><mi>w</mi><mi>i</mi></msub></mrow></math> est le poid processus dont on souhaite avoir le pourcentage de temps de processeur et <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><munderover><mo>â</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover></mrow></math> est la somme du poid de chacun des processus (y compris celui qui est exÃ©cutÃ©).</p>
</section>
</section>
</section>
</section>
<section id="annexe" class="level1">
<h1><a href="#annexe"><span class="header-section-number">3</span> Annexe</a></h1>
<dl>
<dt><strong>PrÃ©emption</strong></dt>
<dd>La capacitÃ© de lâordonnanceur Ã  changer de processus en plein milieu de son exÃ©cution.
</dd>
</dl>
</section>
<script>
    document.getElementById("TOC").className = "mobile-hidden";

    var button = document.getElementById("toggle-nav");

    button.addEventListener("click", function() {
        var tableOfContents = document.getElementById("TOC");
        var navbar = document.getElementsByClassName("navbar")[0];
        if (tableOfContents.className === "") {
            navbar.id = "";
            tableOfContents.className = "mobile-hidden";
        }
        else {
            navbar.id = "fixed-navbar";
            tableOfContents.className = "";
        }
    }, false);
</script>
</body>
</html>
